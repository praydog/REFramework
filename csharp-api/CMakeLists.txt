# This file is automatically generated from cmake.toml - DO NOT EDIT
# See https://github.com/build-cpp/cmkr for more information

cmake_minimum_required(VERSION 3.15)

if(CMAKE_SOURCE_DIR STREQUAL CMAKE_BINARY_DIR)
	message(FATAL_ERROR "In-tree builds are not supported. Run CMake from a separate directory: cmake -B build")
endif()

set(CMKR_ROOT_PROJECT OFF)
if(CMAKE_CURRENT_SOURCE_DIR STREQUAL CMAKE_SOURCE_DIR)
	set(CMKR_ROOT_PROJECT ON)

	# Bootstrap cmkr and automatically regenerate CMakeLists.txt
	include(cmkr.cmake OPTIONAL RESULT_VARIABLE CMKR_INCLUDE_RESULT)
	if(CMKR_INCLUDE_RESULT)
		cmkr()
	endif()

	# Enable folder support
	set_property(GLOBAL PROPERTY USE_FOLDERS ON)

	# Create a configure-time dependency on cmake.toml to improve IDE support
	configure_file(cmake.toml cmake.toml COPYONLY)
endif()

project(CSharpAPIProject
	LANGUAGES
		CXX
		C
		CSharp
)

include(CSharpUtilities)

set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} /MP")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /MP")
set(CMAKE_CSharp_FLAGS "${CMAKE_CSHARP_FLAGS} /langversion:latest /platform:x64")

# Disable exceptions
# string(REGEX REPLACE "/EHsc" "" CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}")

set(ASMJIT_STATIC ON CACHE BOOL "" FORCE)
set(DYNAMIC_LOADER ON CACHE BOOL "" FORCE) # OpenXR
set(BUILD_TOOLS OFF CACHE BOOL "" FORCE) # DirectXTK

if ("${CMAKE_BUILD_TYPE}" MATCHES "Release")
    set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} /MT")
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /MT")

    # Statically compile runtime
    string(REGEX REPLACE "/MD" "/MT" CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}")
    string(REGEX REPLACE "/MD" "/MT" CMAKE_C_FLAGS "${CMAKE_C_FLAGS}")
    string(REGEX REPLACE "/MD" "/MT" CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE}")
    string(REGEX REPLACE "/MD" "/MT" CMAKE_C_FLAGS_RELEASE "${CMAKE_C_FLAGS_RELEASE}")
    
    message(NOTICE "Building in Release mode")
endif()

set(CMAKE_MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>")

set(NUGET_PACKAGES_DIR "$ENV{NUGET_PACKAGES}")

# If NUGET_PACKAGES_DIR is not set, fall back to the default location
if(NOT NUGET_PACKAGES_DIR)
    if(WIN32)
        set(DEFAULT_NUGET_PATH "$ENV{USERPROFILE}/.nuget/packages")
    else()
        set(DEFAULT_NUGET_PATH "$ENV{HOME}/.nuget/packages")
    endif()
    set(NUGET_PACKAGES_DIR ${DEFAULT_NUGET_PATH})
endif()

# Helper function for setting target properties with custom DLLs
function(set_dotnet_references TARGET DLL_PREFIX DLLS)
  foreach(dll IN ITEMS ${DLLS})
    string(REPLACE "REFramework.NET." "" DLL_NAME ${dll})
    string(REPLACE ".dll" "" DLL_NAME ${DLL_NAME})
    set_target_properties(${TARGET} PROPERTIES
      VS_DOTNET_REFERENCE_${DLL_NAME}
      "${CMAKE_BINARY_DIR}/bin/${DLL_PREFIX}/REFramework.NET.${DLL_NAME}.dll"
    )
    set_target_properties(${TARGET} PROPERTIES
      VS_PACKAGE_REFERENCES "REFramework.NET.${DLL_NAME}"
    )
  endforeach()

  set_target_properties(${TARGET} PROPERTIES
    VS_DOTNET_REFERENCE_REFramework.NET
    "${REFRAMEWORK_DOT_NET_ASSEMBLY_PATH}"
	)
endfunction()

# Helper function for checking custom DLL existence
function(check_dlls_exist DLL_PREFIX DLLS VAR_NAME)
  message(STATUS "${VAR_NAME} Checking for DLLs in ${CMAKE_BINARY_DIR}/bin/${DLL_PREFIX}")
  set(${VAR_NAME} TRUE PARENT_SCOPE)
  foreach(dll IN ITEMS ${DLLS})
    if(NOT EXISTS "${CMAKE_BINARY_DIR}/bin/${DLL_PREFIX}/${dll}")
      set(${VAR_NAME} FALSE)
      message(STATUS "DLL ${dll} does not exist in ${CMAKE_BINARY_DIR}/bin/${DLL_PREFIX}")
      break()
    endif()
  endforeach()

  if (NOT ${${VAR_NAME}})
    set(${VAR_NAME} FALSE PARENT_SCOPE)
    message(STATUS "One or more specified DLLs do not exist (${DLL_PREFIX})")
  else()
    message(STATUS "All specified DLLs exist (${DLL_PREFIX})")
  endif()
endfunction()

# RE2
set(RE2_DLLS "REFramework.NET._mscorlib.dll;REFramework.NET._System.dll;REFramework.NET._System.Core.dll;REFramework.NET.application.dll;REFramework.NET.viacore.dll")
check_dlls_exist("re2" "${RE2_DLLS}" "REFRAMEWORK_REF_ASSEMBLIES_EXIST_RE2")

# RE4
set(RE4_DLLS "REFramework.NET._mscorlib.dll;REFramework.NET._System.dll;REFramework.NET._System.Core.dll;REFramework.NET.application.dll;REFramework.NET.viacore.dll")
check_dlls_exist("re4" "${RE4_DLLS}" "REFRAMEWORK_REF_ASSEMBLIES_EXIST_RE4")

# DMC5
set(DMC5_DLLS "REFramework.NET._mscorlib.dll;REFramework.NET._System.dll;REFramework.NET._System.Core.dll;REFramework.NET.application.dll;REFramework.NET.viacore.dll")
check_dlls_exist("dmc5" "${DMC5_DLLS}" "REFRAMEWORK_REF_ASSEMBLIES_EXIST_DMC5")

# DD2
set(DD2_DLLS "REFramework.NET._System.dll;REFramework.NET.application.dll;REFramework.NET.viacore.dll")
check_dlls_exist("dd2" "${DD2_DLLS}" "REFRAMEWORK_REF_ASSEMBLIES_EXIST_DD2")

# MHWILDS
set(MHWILDS_DLLS "REFramework.NET._System.Private.CoreLib.dll;REFramework.NET.application.dll;REFramework.NET.viacore.dll")
check_dlls_exist("mhwilds" "${MHWILDS_DLLS}" "REFRAMEWORK_REF_ASSEMBLIES_EXIST_MHWILDS")

# Define a list of NuGet packages and their versions
# the last part, the package framework will only be used for copying the files
set(REFRAMEWORK_NUGET_PACKAGES
    "Microsoft.CodeAnalysis.Common:4.9.2:net7.0"
    "Microsoft.CodeAnalysis.CSharp:4.9.2:net7.0"
    "ImGui.NET:1.90.1.1:net6.0"
)

# Generate the VS_PACKAGE_REFERENCES property value
set(REFRAMEWORK_PACKAGE_REFERENCES "")
foreach(PACKAGE ${REFRAMEWORK_NUGET_PACKAGES})
    # Extract package name and version from the package string
    string(REPLACE ":" ";" PACKAGE_PARTS ${PACKAGE})
    list(GET PACKAGE_PARTS 0 PACKAGE_NAME)
    list(GET PACKAGE_PARTS 1 PACKAGE_VERSION)

    # Append the package reference to the REFRAMEWORK_PACKAGE_REFERENCES variable
    set(REFRAMEWORK_PACKAGE_REFERENCES "${REFRAMEWORK_PACKAGE_REFERENCES}${PACKAGE_NAME}_${PACKAGE_VERSION};")
endforeach()

# Target: REFCoreDeps
set(REFCoreDeps_SOURCES
	"REFCoreDeps/Compiler.cs"
	"REFCoreDeps/GarbageCollectionDisplay.cs"
	"REFCoreDeps/HashHelper.cs"
	"REFCoreDeps/TypeName.cs"
	cmake.toml
)

add_library(REFCoreDeps SHARED)

target_sources(REFCoreDeps PRIVATE ${REFCoreDeps_SOURCES})
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${REFCoreDeps_SOURCES})

set_target_properties(REFCoreDeps PROPERTIES
	RUNTIME_OUTPUT_DIRECTORY_RELEASE
		"${CMAKE_BINARY_DIR}/bin/"
	RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO
		"${CMAKE_BINARY_DIR}/bin"
	RUNTIME_OUTPUT_DIRECTORY_DEBUG
		"${CMAKE_BINARY_DIR}/bin"
	LIBRARY_OUTPUT_DIRECTORY_RELEASE
		"${CMAKE_BINARY_DIR}/lib"
	LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO
		"${CMAKE_BINARY_DIR}/lib"
	LIBRARY_OUTPUT_DIRECTORY_DEBUG
		"${CMAKE_BINARY_DIR}/lib"
	DOTNET_SDK
		Microsoft.NET.Sdk
	DOTNET_TARGET_FRAMEWORK
		net8.0-windows
	VS_CONFIGURATION_TYPE
		ClassLibrary
)

set(CMKR_TARGET REFCoreDeps)
set_target_properties(REFCoreDeps PROPERTIES VS_PACKAGE_REFERENCES "${REFRAMEWORK_PACKAGE_REFERENCES}")

# Target: csharp-api
set(csharp-api_SOURCES
	"REFrameworkNET/API.cpp"
	"REFrameworkNET/AssemblyInfo.cpp"
	"REFrameworkNET/Attributes/Callback.cpp"
	"REFrameworkNET/Attributes/Method.cpp"
	"REFrameworkNET/Attributes/MethodHook.cpp"
	"REFrameworkNET/Attributes/Plugin.cpp"
	"REFrameworkNET/Callbacks.cpp"
	"REFrameworkNET/Field.cpp"
	"REFrameworkNET/ManagedObject.cpp"
	"REFrameworkNET/Method.cpp"
	"REFrameworkNET/MethodHook.cpp"
	"REFrameworkNET/Module.cpp"
	"REFrameworkNET/NativeObject.cpp"
	"REFrameworkNET/Plugin.cpp"
	"REFrameworkNET/PluginLoadContext.cpp"
	"REFrameworkNET/PluginManager.cpp"
	"REFrameworkNET/Proxy.cpp"
	"REFrameworkNET/SystemString.cpp"
	"REFrameworkNET/TDB.cpp"
	"REFrameworkNET/TypeDefinition.cpp"
	"REFrameworkNET/UnifiedObject.cpp"
	"REFrameworkNET/Utility.cpp"
	"REFrameworkNET/VM.cpp"
	"REFrameworkNET/ValueType.cpp"
	"REFrameworkNET/API.hpp"
	"REFrameworkNET/Attributes/Callback.hpp"
	"REFrameworkNET/Attributes/Method.hpp"
	"REFrameworkNET/Attributes/MethodHook.hpp"
	"REFrameworkNET/Attributes/Plugin.hpp"
	"REFrameworkNET/Callbacks.hpp"
	"REFrameworkNET/Field.hpp"
	"REFrameworkNET/IObject.hpp"
	"REFrameworkNET/IProxyable.hpp"
	"REFrameworkNET/InvokeRet.hpp"
	"REFrameworkNET/ManagedObject.hpp"
	"REFrameworkNET/ManagedSingleton.hpp"
	"REFrameworkNET/Method.hpp"
	"REFrameworkNET/MethodHook.hpp"
	"REFrameworkNET/MethodParameter.hpp"
	"REFrameworkNET/Module.hpp"
	"REFrameworkNET/NativeObject.hpp"
	"REFrameworkNET/NativePool.hpp"
	"REFrameworkNET/NativeSingleton.hpp"
	"REFrameworkNET/ObjectEnumerator.hpp"
	"REFrameworkNET/Plugin.hpp"
	"REFrameworkNET/PluginLoadContext.hpp"
	"REFrameworkNET/PluginManager.hpp"
	"REFrameworkNET/Property.hpp"
	"REFrameworkNET/Proxy.hpp"
	"REFrameworkNET/SystemString.hpp"
	"REFrameworkNET/TDB.hpp"
	"REFrameworkNET/TypeDefinition.hpp"
	"REFrameworkNET/TypeInfo.hpp"
	"REFrameworkNET/UnifiedObject.hpp"
	"REFrameworkNET/Utility.hpp"
	"REFrameworkNET/VM.hpp"
	"REFrameworkNET/ValueType.hpp"
	cmake.toml
)

add_library(csharp-api SHARED)

target_sources(csharp-api PRIVATE ${csharp-api_SOURCES})
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${csharp-api_SOURCES})

target_compile_features(csharp-api PUBLIC
	cxx_std_20
)

target_compile_options(csharp-api PUBLIC
	"/EHa"
	"/MD"
	"/doc"
)

target_include_directories(csharp-api PUBLIC
	"../include/"
)

target_link_libraries(csharp-api PUBLIC
	REFCoreDeps
)

set_target_properties(csharp-api PROPERTIES
	OUTPUT_NAME
		REFramework.NET
	RUNTIME_OUTPUT_DIRECTORY_RELEASE
		"${CMAKE_BINARY_DIR}/bin/"
	RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO
		"${CMAKE_BINARY_DIR}/bin/"
	RUNTIME_OUTPUT_DIRECTORY_DEBUG
		"${CMAKE_BINARY_DIR}/bin/"
	LIBRARY_OUTPUT_DIRECTORY_RELEASE
		"${CMAKE_BINARY_DIR}/lib/"
	LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO
		"${CMAKE_BINARY_DIR}/lib/"
	LIBRARY_OUTPUT_DIRECTORY_DEBUG
		"${CMAKE_BINARY_DIR}/lib/"
	COMMON_LANGUAGE_RUNTIME
		netcore
	DOTNET_TARGET_FRAMEWORK
		net8.0-windows
	VS_GLOBAL_EnableManagedPackageReferenceSupport
		true
	VS_GLOBAL_ConcurrentGarbageCollection
		true
)

set(CMKR_TARGET csharp-api)
foreach(PACKAGE ${REFRAMEWORK_NUGET_PACKAGES})
    # Extract package name and version from the package string
    string(REPLACE ":" ";" PACKAGE_PARTS ${PACKAGE})
    list(GET PACKAGE_PARTS 0 PACKAGE_NAME)
    list(GET PACKAGE_PARTS 1 PACKAGE_VERSION)
    list(GET PACKAGE_PARTS 2 PACKAGE_FRAMEWORK)

    # Copy the package files to the output directory
    add_custom_command(
        TARGET csharp-api POST_BUILD
        COMMAND ${CMAKE_COMMAND} -E copy_directory
                ${NUGET_PACKAGES_DIR}/${PACKAGE_NAME}/${PACKAGE_VERSION}/lib/${PACKAGE_FRAMEWORK}
                ${CMAKE_BINARY_DIR}/bin/
        COMMENT "Copying ${PACKAGE_NAME} NuGet package"
    )
endforeach()

set(REFRAMEWORK_DOT_NET_ASSEMBLY_DIR "${CMAKE_BINARY_DIR}/bin")
set(REFRAMEWORK_DOT_NET_ASSEMBLY_PATH "${CMAKE_BINARY_DIR}/bin/REFramework.NET.dll")

set_target_properties(csharp-api PROPERTIES
VS_DOTNET_REFERENCE_REFCoreDeps
"${REFRAMEWORK_DOT_NET_ASSEMBLY_DIR}/REFCoreDeps.dll"
)

set_target_properties(csharp-api PROPERTIES VS_PACKAGE_REFERENCES "REFCoreDeps")

# Target: AssemblyGenerator
set(AssemblyGenerator_SOURCES
	"AssemblyGenerator/ClassGenerator.cs"
	"AssemblyGenerator/EnumGenerator.cs"
	"AssemblyGenerator/Generator.cs"
	"AssemblyGenerator/SyntaxTreeBuilder.cs"
	"AssemblyGenerator/TypeHandler.cs"
	cmake.toml
)

add_library(AssemblyGenerator SHARED)

target_sources(AssemblyGenerator PRIVATE ${AssemblyGenerator_SOURCES})
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${AssemblyGenerator_SOURCES})

target_link_libraries(AssemblyGenerator PUBLIC
	csharp-api
	REFCoreDeps
)

set_target_properties(AssemblyGenerator PROPERTIES
	RUNTIME_OUTPUT_DIRECTORY_RELEASE
		"${CMAKE_BINARY_DIR}/bin/"
	RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO
		"${CMAKE_BINARY_DIR}/bin"
	RUNTIME_OUTPUT_DIRECTORY_DEBUG
		"${CMAKE_BINARY_DIR}/bin"
	LIBRARY_OUTPUT_DIRECTORY_RELEASE
		"${CMAKE_BINARY_DIR}/lib"
	LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO
		"${CMAKE_BINARY_DIR}/lib"
	LIBRARY_OUTPUT_DIRECTORY_DEBUG
		"${CMAKE_BINARY_DIR}/lib"
	DOTNET_SDK
		Microsoft.NET.Sdk
	DOTNET_TARGET_FRAMEWORK
		net8.0-windows
	VS_CONFIGURATION_TYPE
		ClassLibrary
)

set(CMKR_TARGET AssemblyGenerator)
set_target_properties(AssemblyGenerator PROPERTIES
VS_DOTNET_REFERENCE_REFramework.NET
"${REFRAMEWORK_DOT_NET_ASSEMBLY_PATH}"
)

# Target: CSharpAPITest
if(REFRAMEWORK_REF_ASSEMBLIES_EXIST_DD2) # build-csharp-test-dd2
	set(CSharpAPITest_SOURCES
		"test/Test/Test.cs"
		cmake.toml
	)

	add_library(CSharpAPITest SHARED)

	target_sources(CSharpAPITest PRIVATE ${CSharpAPITest_SOURCES})
	source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${CSharpAPITest_SOURCES})

	target_link_libraries(CSharpAPITest PUBLIC
		csharp-api
	)

	set_target_properties(CSharpAPITest PROPERTIES
		RUNTIME_OUTPUT_DIRECTORY_RELEASE
			"${CMAKE_BINARY_DIR}/bin/"
		RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO
			"${CMAKE_BINARY_DIR}/bin"
		RUNTIME_OUTPUT_DIRECTORY_DEBUG
			"${CMAKE_BINARY_DIR}/bin"
		LIBRARY_OUTPUT_DIRECTORY_RELEASE
			"${CMAKE_BINARY_DIR}/lib"
		LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO
			"${CMAKE_BINARY_DIR}/lib"
		LIBRARY_OUTPUT_DIRECTORY_DEBUG
			"${CMAKE_BINARY_DIR}/lib"
		DOTNET_SDK
			Microsoft.NET.Sdk
		DOTNET_TARGET_FRAMEWORK
			net8.0-windows
		VS_CONFIGURATION_TYPE
			ClassLibrary
	)

	set(CMKR_TARGET CSharpAPITest)
	set_dotnet_references(CSharpAPITest "dd2" "${DD2_DLLS}")

endif()
# Target: CSharpAPITestRE2
if(REFRAMEWORK_REF_ASSEMBLIES_EXIST_RE2) # build-csharp-test-re2
	set(CSharpAPITestRE2_SOURCES
		"test/Test/TestRE2.cs"
		cmake.toml
	)

	add_library(CSharpAPITestRE2 SHARED)

	target_sources(CSharpAPITestRE2 PRIVATE ${CSharpAPITestRE2_SOURCES})
	source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${CSharpAPITestRE2_SOURCES})

	target_link_libraries(CSharpAPITestRE2 PUBLIC
		csharp-api
	)

	set_target_properties(CSharpAPITestRE2 PROPERTIES
		RUNTIME_OUTPUT_DIRECTORY_RELEASE
			"${CMAKE_BINARY_DIR}/bin/"
		RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO
			"${CMAKE_BINARY_DIR}/bin"
		RUNTIME_OUTPUT_DIRECTORY_DEBUG
			"${CMAKE_BINARY_DIR}/bin"
		LIBRARY_OUTPUT_DIRECTORY_RELEASE
			"${CMAKE_BINARY_DIR}/lib"
		LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO
			"${CMAKE_BINARY_DIR}/lib"
		LIBRARY_OUTPUT_DIRECTORY_DEBUG
			"${CMAKE_BINARY_DIR}/lib"
		DOTNET_SDK
			Microsoft.NET.Sdk
		DOTNET_TARGET_FRAMEWORK
			net8.0-windows
		VS_CONFIGURATION_TYPE
			ClassLibrary
	)

	set(CMKR_TARGET CSharpAPITestRE2)
	set_dotnet_references(CSharpAPITestRE2 "re2" "${RE2_DLLS}")

endif()
# Target: CSharpAPITestRE4
if(REFRAMEWORK_REF_ASSEMBLIES_EXIST_RE4) # build-csharp-test-re4
	set(CSharpAPITestRE4_SOURCES
		"test/Test/TestRE4.cs"
		cmake.toml
	)

	add_library(CSharpAPITestRE4 SHARED)

	target_sources(CSharpAPITestRE4 PRIVATE ${CSharpAPITestRE4_SOURCES})
	source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${CSharpAPITestRE4_SOURCES})

	target_link_libraries(CSharpAPITestRE4 PUBLIC
		csharp-api
	)

	set_target_properties(CSharpAPITestRE4 PROPERTIES
		RUNTIME_OUTPUT_DIRECTORY_RELEASE
			"${CMAKE_BINARY_DIR}/bin/"
		RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO
			"${CMAKE_BINARY_DIR}/bin"
		RUNTIME_OUTPUT_DIRECTORY_DEBUG
			"${CMAKE_BINARY_DIR}/bin"
		LIBRARY_OUTPUT_DIRECTORY_RELEASE
			"${CMAKE_BINARY_DIR}/lib"
		LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO
			"${CMAKE_BINARY_DIR}/lib"
		LIBRARY_OUTPUT_DIRECTORY_DEBUG
			"${CMAKE_BINARY_DIR}/lib"
		DOTNET_SDK
			Microsoft.NET.Sdk
		DOTNET_TARGET_FRAMEWORK
			net8.0-windows
		VS_CONFIGURATION_TYPE
			ClassLibrary
	)

	set(CMKR_TARGET CSharpAPITestRE4)
	set_dotnet_references(CSharpAPITestRE4 "re4" "${RE4_DLLS}")

endif()
# Target: CSharpAPITestMHWilds
if(REFRAMEWORK_REF_ASSEMBLIES_EXIST_MHWILDS) # build-csharp-test-mhwilds
	set(CSharpAPITestMHWilds_SOURCES
		"test/Test/TestMHWilds.cs"
		cmake.toml
	)

	add_library(CSharpAPITestMHWilds SHARED)

	target_sources(CSharpAPITestMHWilds PRIVATE ${CSharpAPITestMHWilds_SOURCES})
	source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${CSharpAPITestMHWilds_SOURCES})

	target_link_libraries(CSharpAPITestMHWilds PUBLIC
		csharp-api
	)

	set_target_properties(CSharpAPITestMHWilds PROPERTIES
		RUNTIME_OUTPUT_DIRECTORY_RELEASE
			"${CMAKE_BINARY_DIR}/bin/"
		RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO
			"${CMAKE_BINARY_DIR}/bin"
		RUNTIME_OUTPUT_DIRECTORY_DEBUG
			"${CMAKE_BINARY_DIR}/bin"
		LIBRARY_OUTPUT_DIRECTORY_RELEASE
			"${CMAKE_BINARY_DIR}/lib"
		LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO
			"${CMAKE_BINARY_DIR}/lib"
		LIBRARY_OUTPUT_DIRECTORY_DEBUG
			"${CMAKE_BINARY_DIR}/lib"
		DOTNET_SDK
			Microsoft.NET.Sdk
		DOTNET_TARGET_FRAMEWORK
			net8.0-windows
		VS_CONFIGURATION_TYPE
			ClassLibrary
	)

	set(CMKR_TARGET CSharpAPITestMHWilds)
	set_dotnet_references(CSharpAPITestMHWilds "mhwilds" "${MHWILDS_DLLS}")

endif()
# Target: CSharpAPITestDMC5
if(REFRAMEWORK_REF_ASSEMBLIES_EXIST_DMC5) # build-csharp-test-dmc5
	set(CSharpAPITestDMC5_SOURCES
		"test/Test/TestDMC5.cs"
		cmake.toml
	)

	add_library(CSharpAPITestDMC5 SHARED)

	target_sources(CSharpAPITestDMC5 PRIVATE ${CSharpAPITestDMC5_SOURCES})
	source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${CSharpAPITestDMC5_SOURCES})

	target_link_libraries(CSharpAPITestDMC5 PUBLIC
		csharp-api
	)

	set_target_properties(CSharpAPITestDMC5 PROPERTIES
		RUNTIME_OUTPUT_DIRECTORY_RELEASE
			"${CMAKE_BINARY_DIR}/bin/"
		RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO
			"${CMAKE_BINARY_DIR}/bin"
		RUNTIME_OUTPUT_DIRECTORY_DEBUG
			"${CMAKE_BINARY_DIR}/bin"
		LIBRARY_OUTPUT_DIRECTORY_RELEASE
			"${CMAKE_BINARY_DIR}/lib"
		LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO
			"${CMAKE_BINARY_DIR}/lib"
		LIBRARY_OUTPUT_DIRECTORY_DEBUG
			"${CMAKE_BINARY_DIR}/lib"
		DOTNET_SDK
			Microsoft.NET.Sdk
		DOTNET_TARGET_FRAMEWORK
			net8.0-windows
		VS_CONFIGURATION_TYPE
			ClassLibrary
	)

	set(CMKR_TARGET CSharpAPITestDMC5)
	set_dotnet_references(CSharpAPITestDMC5 "dmc5" "${DMC5_DLLS}")

endif()
# Target: ObjectExplorer
if(REFRAMEWORK_REF_ASSEMBLIES_EXIST_RE2) # build-csharp-test-re2
	set(ObjectExplorer_SOURCES
		"test/Test/ObjectExplorer.cs"
		cmake.toml
	)

	add_library(ObjectExplorer SHARED)

	target_sources(ObjectExplorer PRIVATE ${ObjectExplorer_SOURCES})
	source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${ObjectExplorer_SOURCES})

	target_link_libraries(ObjectExplorer PUBLIC
		csharp-api
	)

	set_target_properties(ObjectExplorer PROPERTIES
		RUNTIME_OUTPUT_DIRECTORY_RELEASE
			"${CMAKE_BINARY_DIR}/bin/"
		RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO
			"${CMAKE_BINARY_DIR}/bin"
		RUNTIME_OUTPUT_DIRECTORY_DEBUG
			"${CMAKE_BINARY_DIR}/bin"
		LIBRARY_OUTPUT_DIRECTORY_RELEASE
			"${CMAKE_BINARY_DIR}/lib"
		LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO
			"${CMAKE_BINARY_DIR}/lib"
		LIBRARY_OUTPUT_DIRECTORY_DEBUG
			"${CMAKE_BINARY_DIR}/lib"
		DOTNET_SDK
			Microsoft.NET.Sdk
		DOTNET_TARGET_FRAMEWORK
			net8.0-windows
		VS_CONFIGURATION_TYPE
			ClassLibrary
	)

	set(CMKR_TARGET ObjectExplorer)
	set_dotnet_references(ObjectExplorer "re2" "${RE2_DLLS}")

endif()
